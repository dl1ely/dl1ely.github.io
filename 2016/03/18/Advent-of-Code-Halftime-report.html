<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <title>Advent of Code - Halftime report</title>
    <meta name="description" content="" />

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="http://www.stefan-pfeiffer.de/favicon.ico">

    <link rel="stylesheet" type="text/css" href="//www.stefan-pfeiffer.de/themes/casper/assets/css/screen.css?v=1469221774240" />
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400" />

    <link rel="canonical" href="http://www.stefan-pfeiffer.de/2016/03/18/Advent-of-Code-Halftime-report.html" />
    <meta name="referrer" content="origin" />
    
    <meta property="og:site_name" content="Dr. Stefan Pfeiffer" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Advent of Code - Halftime report" />
    <meta property="og:description" content="Sometime in mid December 2015 i discovered Advent of Code and was immediately hooked by the nature of the programming challenges given there. You are given a problem with some simple examples that can lead your test-driven development, and a set of inputs. You have to provide the answer to" />
    <meta property="og:url" content="http://www.stefan-pfeiffer.de/2016/03/18/Advent-of-Code-Halftime-report.html" />
    <meta property="article:tag" content="clojure" />
    
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Advent of Code - Halftime report" />
    <meta name="twitter:description" content="Sometime in mid December 2015 i discovered Advent of Code and was immediately hooked by the nature of the programming challenges given there. You are given a problem with some simple examples that can lead your test-driven development, and a set of inputs. You have to provide the answer to" />
    <meta name="twitter:url" content="http://www.stefan-pfeiffer.de/2016/03/18/Advent-of-Code-Halftime-report.html" />
    
    <script type="application/ld+json">
null
    </script>

    <meta name="generator" content="HubPress" />
    <link rel="alternate" type="application/rss+xml" title="Dr. Stefan Pfeiffer" href="http://www.stefan-pfeiffer.de/rss/" />
</head>
<body class="post-template tag-clojure nav-closed">

    

    <div class="site-wrapper">

        


<header class="main-header post-head no-cover">
    <nav class="main-nav  clearfix">
        <a class="blog-logo" href="http://www.stefan-pfeiffer.de"><img src="https://avatars3.githubusercontent.com/u/427752?v&#x3D;3&amp;s&#x3D;460" alt="Dr. Stefan Pfeiffer" /></a>
    </nav>
</header>

<main class="content" role="main">
    <article class="post tag-clojure">

        <header class="post-header">
            <h1 class="post-title">Advent of Code - Halftime report</h1>
            <section class="post-meta">
                <time class="post-date" datetime="2016-03-18">18 March 2016</time>  on <a href="http://www.stefan-pfeiffer.de/tag/clojure/">clojure</a>
            </section>
        </header>

        <section class="post-content">
            <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Sometime in mid December 2015 i discovered <a href="http://adventofcode.com/">Advent of Code</a> and was immediately hooked by the nature of the programming challenges given there. You are given a problem with some simple examples that can lead your test-driven development, and a set of inputs. You have to provide the answer to the problem for the given inputs. It is only the answer that counts, not the way you achieved the solution. To discourage spoilers, there are many different set of inputs for different participants. A right answer gives you one star. After solving the first problem of every day is solved, you get access to a second, slightly modified problem with the same input. Solving this gives you a second star. There are 24 two-part problems that were published from the 1st to the 24th of December. In sum one can achieve 48 stars, 2 for each day.</p>
</div>
<div class="paragraph">
<p>I discovered the page late, but started from day 1 anyway. This looked like fun, and i wanted to train my Clojure knowledge more. Unfortunately, during the next days i only caught up only to day 9 or so, then christmas holidays were there and no free time available. Luckily, the site stayed up till now and one can still solve the problems. Despite the festive theming of the problems, this is still fun today, and so i want to continue solving the problems one after one until i have earned my 48 stars.</p>
</div>
<div class="paragraph">
<p>Being at day 12 now, halfway through, i want to elaborate on what i experienced. Some problems were rather easy to solve, but some were rather tricky and required changing the methodology for solving. My solutions are on <a href="https://github.com/dl1ely/advent-of-code">Github</a>, but they are not well documented nor polished.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_day_1_counting_the_parentheses">day 1 - counting the parentheses</h2>
<div class="sectionbody">
<div class="paragraph">
<p>What a nice start into the 24 problems when using a LISP. Outputting the balance of the parenthesis was very easy by using <code>frequencies</code> on the input string and subtracting the frequency of <code>)</code> from <code>(</code>. Unfortunately, for the second part of the problem, that didn&#8217;t help, i needed to abort when hitting 0. So i went for a <code>reduce</code> that printed the current index when hitting a negative sum. The first of the outputs was the first balanced parenthesis.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_day_2_calculating_gift_wrap_paper">day 2 - calculating gift wrap paper</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Nothing special here - parsing the string input data to list values, then defining the functions that map the dimensions to areas (plus slack) and lengthes. Then reduce the values to their sums. Easy!</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_day_3_visiting_houses">day 3 - visiting houses</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This one was also rather straightforward by keeping track of the visited houses with a hash set holding the X-Y-coordinates, and a reducing function that keeps track of the current position. After processing all arrows of the input, the number of entries in the set is the number of visited houses. The hash set ignores the already visited positions, so we do not have to handle that explicitly.</p>
</div>
<div class="paragraph">
<p>The second part of the puzzle was very elegant, too. Using <code>take-nth 2</code> on the original input twice (with an offset of one) Santa and his robot get their individual routes. Both produce a hash set of visited locations using the function from the first part of the puzzle. Then boths sets get merged using <code>clojure.set.union</code>, and again the count of set members is the number of visited houses.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_day_4_finding_hashes_starting_with_zeroes">day 4 - finding hashes starting with zeroes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Using Clojure Java interop (and copy-and-pasting a convenience clojure MD5 wrapper function from StackOverflow) this was also not too hard. Taking the first hash from a infinite lazy sequence of hashes that were filtered for starting zeroes did the trick.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_day_5_naughty_strings_and_nice_strings">day 5 - naughty strings and nice strings</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This was easily solved by defining the right predicates, combining them with <code>and</code> and filtering the input strings. The three-vowels-rule was checked by using our friend <code>frequency</code> again and adding up the vowel frequencies only, double letters were detected by partitioning the strings in pairs of two characters and checking if at least one of them had two identical ones.</p>
</div>
<div class="paragraph">
<p>The second part of the puzzle went similar. Finding the non-overlapping bigrams was done by trying to replace each bigram in the input string with an empty string and testing if the length of the resulting string differed by more than 2. If yes, another identical bigram must have been present in the string.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_day_6_christmas_lights">day 6 - christmas lights</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This was a harder one. At first i wanted to keep track of the lit lights in a hash set of coordinates and manipulate them by an elaborate use of <code>clojure.set.difference</code> and <code>clojure.set.union</code>. That worked fine in some test code, but due to immutability, copying the hash set again and again led to GC problems that i could not fix with JVM parameters when using the real, big data set. I resorted to using a „native” Java array that i wrote with <code>aset</code> and read with <code>aget</code>. I shot myself in the foot by forgetting about the mutability of Java arrays, but finally, all worked out. Each cells content (an int) represented a dim light when the number was even and a lit light wenn the number was odd. Changing the lights was just a matter of incrementing the cells in the right way.</p>
</div>
<div class="paragraph">
<p>Luckily, for the second part of the puzzle, the hash set would not have helped me anyway, but the array with ints was the right way to go. Implementing brightness was straightforward.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_day_7_wires">day 7 - wires</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This one was also a little bit tricky to get right. I parsed the text input into maps with the wire names as keys and the commands and possible operands as vector value. Then i resolved the last wire by resolving its command and propagating backwards recursively. For executing the different commands, i used a multi method that dispatched on the command name. Great gain by using Clojure! Sure enough, i hit the stack limit with the big input data set. Recursion can be bad. I circumvented that by memoizing the results of wire resolving, replacing the command associated with a wire with its resolved value to use in future computations, once its resolved value was known. Another small problem was the limitation to 16 bits unsigned, so intermediate results had to be `bit-and`ed with 0xFFFF.</p>
</div>
<div class="paragraph">
<p>The second part of the puzzle was solved by manually editing the input with the new value for wire b from part one and solving again.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_day_8_character_encodings">day 8 - character encodings</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As always, character encodings suck. This one was hard to get right with all the edge cases. I finally did it after many unsuccessful tries with two functions using <code>recur</code> to loop over the strings, looking 2 characters ahead and doing the right things in two <code>condp</code> constructs. I was happy i made it „somehow“ and moved on…</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_day_9_traveling_santa_man">day 9 - traveling santa man</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The number of cities to visit was small enough to solve it brute force: Try all permutations of cities (<code>clojure.math.combinatorics</code> to the rescue!), calculate the length of the route for each, then sort for the shortest route (part 1) or the longest route (part 2). No surprises here.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_day_10_look_and_say">day 10 - look and say</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Two nested <code>recur</code> loops did the job of counting the consecutive digits and producing the next sequence. <code>iterate</code> made that a infinite lazy sequence from which i realized the 40th (part 1) and 50th (part 2) sequence. It was surprising how much longer it took to realize the 10 sequences between 40 and 50 than to realize the first 40 sequences. But finally, the program ended and day 10 was solved.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_day_11_password_policies">day 11 - password policies</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Day 11 did wear me down. I failed at producing correct „incremented“ passwords to test the conditions on. I could not get it right quickly and finally made a long break for this puzzle. One day when i tried to get my Clojure-deprived brain in balance again, i started this puzzle from scratch using <a href="http://gorilla-repl.org/">Gorilla REPL</a>, which makes for a much nicer interactive development for those small puzzles.</p>
</div>
<div class="paragraph">
<p>I still struggled to get the non-overlapping duplets of characters right, and finally resorted to a less-than-elegant solution that returned the indices of all found duplets and counts them if they are least 2 apart, thus skipping over the overlapping pairs. I am not satisfied with this solution, but it worked. After some experimenting i also got the generation of the „next“ password right and could filter an iterated list of them starting with my puzzle input to get the first valid one.</p>
</div>
<div class="paragraph">
<p>Seeing the result i realised it woult most likely have been quicker to solve that puzzle by hand on a piece of paper. But well, we are here to learn, aren&#8217;t we?</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_day_12_sum_the_ints">day 12 - sum the ints</h2>
<div class="sectionbody">
<div class="paragraph">
<p>I used <code>clojure.data.json</code> to parse the input data to a data structure and then recursively calculated the sums of the ints in the subordinate structures, flattening vectors and taking only the vals of maps along the way, branching on the type of the object i was looking at, using <code>integer?</code> for atomic values, <code>map?</code> for maps and <code>vector?</code> for vectors. If none of the predicates matches, we return 0 to skip over strings. This could have been done in a multimethod that dispatches on the type of the argument, but for this simple case, i went for <code>cond</code>.</p>
</div>
<div class="paragraph">
<p>Solving the second part of the puzzle was only a matter of having a predicate that checks for any value being „red“ in the map, and returning 0 instead of the sum of the values if it is found.</p>
</div>
<div class="paragraph">
<p>I could have refactored and put the predicate as a parameter to the value-summing function, but i resorted to doing copy-and-paste for the sake of this puzzle, directly inserting the predicate.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_going_on">going on…</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This was the first half of the Advent of Code 2015, but i will continue to solve all puzzles during the next days, and i hope there will be an Advent of Code 2016. I promise to not be that late to the party as i was this time. Thanks to <a href="http://was.tl/">Eric Wastl</a> for creating this great page and being so creative on the puzzles.</p>
</div>
</div>
</div>
        </section>

        <footer class="post-footer">


            <figure class="author-image">
                <a class="img" href="http://www.stefan-pfeiffer.de/author/dl1ely/" style="background-image: url(https://avatars.githubusercontent.com/u/427752?v&#x3D;3)"><span class="hidden">Stefan Pfeiffer's Picture</span></a>
            </figure>

            <section class="author">
                <h4><a href="http://www.stefan-pfeiffer.de/author/dl1ely/">Stefan Pfeiffer</a></h4>

                    <p>Read <a href="http://www.stefan-pfeiffer.de/author/dl1ely/">more posts</a> by this author.</p>
                <div class="author-meta">
                    <span class="author-location icon-location">Aachen, Germany</span>
                    <span class="author-link icon-link"><a href="http://dl1ely.github.io">http://dl1ely.github.io</a></span>
                </div>
            </section>


            <section class="share">
                <h4>Share this post</h4>
                <a class="icon-twitter" href="https://twitter.com/intent/tweet?text=Advent%20of%20Code%20-%20Halftime%20report&amp;url=http://www.stefan-pfeiffer.de/2016/03/18/Advent-of-Code-Halftime-report.html"
                    onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <span class="hidden">Twitter</span>
                </a>
                <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://www.stefan-pfeiffer.de/2016/03/18/Advent-of-Code-Halftime-report.html"
                    onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <span class="hidden">Facebook</span>
                </a>
                <a class="icon-google-plus" href="https://plus.google.com/share?url=http://www.stefan-pfeiffer.de/2016/03/18/Advent-of-Code-Halftime-report.html"
                   onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <span class="hidden">Google+</span>
                </a>
            </section>

        </footer>


        <section class="post-comments">
          <div id="disqus_thread"></div>
          <script type="text/javascript">
          var disqus_shortname = 'dl1ely-github-io'; // required: replace example with your forum shortname
          /* * * DON'T EDIT BELOW THIS LINE * * */
          (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
          })();
          </script>
          <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
          <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        </section>


    </article>

</main>

<aside class="read-next">
</aside>



        <footer class="site-footer clearfix">
            <section class="copyright"><a href="http://www.stefan-pfeiffer.de">Dr. Stefan Pfeiffer</a> &copy; 2016</section>
            <section class="poweredby">Proudly published with <a href="http://hubpress.io">HubPress</a></section>
        </footer>

    </div>

    <script type="text/javascript" src="https://code.jquery.com/jquery-1.12.0.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js?v="></script> <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.9.0/moment-with-locales.min.js?v="></script> <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js?v="></script> 
      <script type="text/javascript">
        jQuery( document ).ready(function() {
          // change date with ago
          jQuery('ago.ago').each(function(){
            var element = jQuery(this).parent();
            element.html( moment(element.text()).fromNow());
          });
        });

        hljs.initHighlightingOnLoad();
      </script>

    <script type="text/javascript" src="//www.stefan-pfeiffer.de/themes/casper/assets/js/jquery.fitvids.js?v=1469221774240"></script>
    <script type="text/javascript" src="//www.stefan-pfeiffer.de/themes/casper/assets/js/index.js?v=1469221774240"></script>

</body>
</html>
